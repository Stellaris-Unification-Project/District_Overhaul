################
### The Belt ###
################

district_wind_turbine_belt = {
	base_buildtime = 240
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		OR = {
			is_planet_class = pc_desert
			is_planet_class = pc_barren_habitable
			is_planet_class = pc_prairie
			is_planet_class = pc_desolate
		}
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		### AlphaMod
		NOT = { 
			AND = {
				has_global_flag = gf_alphamod_activated
				is_hostile_planet_ia = yes
			}
		}
	}
	
	potential = {
		OR = {
			is_planet_class = pc_desert
			is_planet_class = pc_barren_habitable
			is_planet_class = pc_prairie
			is_planet_class = pc_desolate
		}
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
		### AlphaMod
		NOT = { 
			AND = {
				has_global_flag = gf_alphamod_activated
				is_hostile_planet_ia = yes
			}
		}
	}
	
	allow = {
		NOT = { has_modifier = resort_colony }
	}	
	
	conversion_ratio = 1
	convert_to = {
		district_generator
		district_generator_uncapped
		district_wind_turbines
		district_geothermal_generator
		district_solar_generator
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = 300
		}	
		upkeep = {
			energy = 1
		}	
		upkeep = {
		 	trigger = { 
				owner = { or = { has_valid_civic = civic_socialistic	}	}
			}
			energy = 0.15
		}		
	}	
	
	planet_modifier = {
		planet_housing_add = 2
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_keepers_harmony }
		}
		modifier = { planet_amenities_add = -1}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_housing_agrarian_idyll 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}		
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_technician_drone_add = 3
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_technician_drone_add = 2
		}
	}	
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = {
			job_technician_add = 2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
			   	OR = {
			       		has_valid_civic = civic_labour_unions
				   	has_valid_civic = civic_socialistic
				}
			}
		}
		modifier = { job_technician_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = {
			job_fe_acolyte_generator_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_technician_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_generator_effect_desc
	}
	
	ai_weight = {
		weight = 1
		modifier = 
		{
			factor = 3
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 8
				}
			}
		}

		modifier = {
			factor = 2
			free_housing < 0
		}

		modifier = {
			factor = 3
			any_owned_pop = { 
				OR = { 
					is_unemployed = yes 
					has_job = servant 
				}
			}
		}

		# No one to work it anyway
		modifier = {
			factor = 0
			free_housing > 0
			NOT = {
				any_owned_pop = { 
					OR = { 
						is_unemployed = yes 
						has_job = servant 
					}
				}
			}
		}

		### Glavius's Ultimate AI
		modifier = {
			weight = 0
			has_global_flag = gai_enabled_flag
		}
		modifier = {

			weight = 500
			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			owner = {
				has_monthly_income = {

					resource = energy

					value < 150

				}

			}

		}
		modifier = {

			factor = 1.5
			has_global_flag = gai_enabled_flag
			owner = {

				has_monthly_income = {

					resource = energy

					value < 0

				}

			}

		}

		modifier = {

			weight = 250000

			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			free_jobs = 0

			num_free_districts = { type = district_mining value = 0 }

		}
	}

	ai_resource_production = {
		energy = 1
		trigger = {
			always = yes
		}
	}
}

district_generator_luna = {
	base_buildtime = 240
	icon = district_generator
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		OR = {
			is_planet_class = pc_luna
		}
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	potential = {
		OR = {
			is_planet_class = pc_luna
		}
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	allow = {
		NOT = { has_modifier = resort_colony }
	}	
	
	conversion_ratio = 1
	convert_to = {
		district_generator
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @base_cost
		}	
		upkeep = {
			energy = 1
		}	
		upkeep = {
		  	trigger = { 
				owner = { or = { has_valid_civic = civic_socialistic	}	}
			}
			energy = 0.15
		}		
	}	
	
	planet_modifier = {
		planet_housing_add = 2
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_keepers_harmony }
		}
		modifier = { planet_amenities_add = -1}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_housing_agrarian_idyll 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}		
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_technician_drone_add = 3
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_technician_drone_add = 2
		}
	}	
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = {
			job_technician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		modifier = {
			job_fe_acolyte_generator_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
			   	OR = {
			       		has_valid_civic = civic_labour_unions
				   	has_valid_civic = civic_socialistic
				}
			}
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_technician_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_fallen_empire_spiritualist = yes }
		}
		text = job_fe_acolyte_generator_effect_desc
	}
	
	ai_weight = {
		weight = 1
		modifier = 
		{
			factor = 3
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 8
				}
			}
		}

		modifier = {
			factor = 2
			free_housing < 0
		}

		modifier = {
			factor = 3
			any_owned_pop = { 
				OR = { 
					is_unemployed = yes 
					has_job = servant 
				}
			}
		}

		# No one to work it anyway
		modifier = {
			factor = 0
			free_housing > 0
			NOT = {
				any_owned_pop = { 
					OR = { 
						is_unemployed = yes 
						has_job = servant 
					}
				}
			}
		}

		### Glavius's Ultimate AI
		modifier = {
			weight = 0
			has_global_flag = gai_enabled_flag
		}
		modifier = {

			weight = 500
			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			owner = {
				has_monthly_income = {

					resource = energy

					value < 150

				}

			}

		}
		modifier = {

			factor = 1.5
			has_global_flag = gai_enabled_flag
			owner = {

				has_monthly_income = {

					resource = energy

					value < 0

				}

			}

		}

		modifier = {

			weight = 250000

			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			free_jobs = 0

			num_free_districts = { type = district_mining value = 0 }

		}
	}

	ai_resource_production = {
		energy = 1
		trigger = {
			always = yes
		}
	}
}

######################
### PJ's Beltalowa ###
######################

district_base_energy_farming = {
	base_buildtime = 240
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
	    OR = {
		    is_planet_class = pc_asteroid_base
		    is_planet_class = pc_moon_base
        }
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	potential = {
	    OR = {
		    is_planet_class = pc_asteroid_base
		    is_planet_class = pc_moon_base
        }
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @hab_cost
		}
		upkeep = {
			energy = @hab_maintenance
		}		
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_housing_agrarian_idyll 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = no }
		}
		modifier = {
			job_technician_add = 3
			job_farmer_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		job_technician_drone_add = 4
        job_agri_drone_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		job_technician_drone_add = 3
        job_agri_drone_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
			   	OR = {
			       		has_valid_civic = civic_labour_unions
				   	has_valid_civic = civic_socialistic
				}
			}
		}
		modifier = { 
			job_technician_add = 1
			job_farmer_add = 1
		}
	}

	triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = no }
        }
		text = job_technician_farmer_effect_desc
	}	

	triggered_desc = {
        trigger = {
            exists = owner
            owner = { is_gestalt = yes }
        }
		text = job_technician_farmer_drone_effect_desc
	}

	ai_weight = {
		weight = 1
		modifier = 
		{
			factor = 3
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 8
				}
			}
		}

		modifier = {
			factor = 2
			free_housing < 0
		}
		
		modifier = {
			factor = 4
            owner = {
                OR = {
                    is_machine_empire = yes
                    is_mechanical_empire = yes
                }
                has_monthly_income = {
                    resource = energy
                    value < 50
                }
            }
		}

		modifier = {
			factor = 3
			any_owned_pop = { 
				OR = { 
					is_unemployed = yes 
					has_job = servant 
				}
			}
		}

		# No one to work it anyway
		modifier = {
			factor = 0
			free_housing > 0
			NOT = {
				any_owned_pop = { 
					OR = { 
						is_unemployed = yes 
						has_job = servant 
					}
				}
			}
		}

		### Glavius's Ultimate AI
		modifier = {
			weight = 0
			has_global_flag = gai_enabled_flag
		}
		modifier = {

			weight = 500
			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			owner = {
				has_monthly_income = {

					resource = energy

					value < 150

				}

			}

		}
		modifier = {

			factor = 1.5
			has_global_flag = gai_enabled_flag
			owner = {

				has_monthly_income = {

					resource = energy

					value < 0

				}

			}

		}

		modifier = {

			weight = 250000

			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			free_jobs = 0

			num_free_districts = { type = district_mining value = 0 }

		}
	}

	ai_resource_production = {
		energy = 1
		trigger = {
			always = yes
		}
	}
}

###################
### Dyson Swarm ###
###################

dyson_swarm_solar_stations = {
	base_buildtime = 320
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		is_planet_class = pc_dyson_swarm
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	potential = {
		is_planet_class = pc_dyson_swarm
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = 400
		}
		upkeep = {
			energy = 1
		}		
	}
	
	planet_modifier = {
		planet_housing_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_keepers_harmony }
		}
		modifier = { planet_amenities_add = -1}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_housing_agrarian_idyll 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_technician_drone_add = 2
		}
	}
	
	#ME get additional technicians
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_technician_drone_add = 3
			planet_housing_add = 1
		}
	}	
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
			}
		}
		modifier = {
			job_technician_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_technician_effect_desc
	}

	ai_weight = {
		weight = 0
		modifier = {
			weight = 150
			factor = 1
			gai_build_district = yes
		}
		modifier = {
			weight = 200
			factor = 1
			gai_build_district = yes
			owner = {
				has_monthly_income = {
					resource = food
					value > 25
				}
			}
			planet = { 
				num_free_districts = { type = dyson_swarm_mining_bays value = 0 } 
				NOT = { any_deposit = {	is_blocker = yes } }
			}
		}
		modifier = {
			weight = 400
			factor = 1
			gai_build_district = yes
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 40
				}
			}
		}
		modifier = {
			weight = 2000
			factor = 1
			gai_build_district = yes
			owner = {
				is_machine_empire = no
				has_monthly_income = {
					resource = energy
					value < 0
				}
			}
		}
		modifier = {
			weight = 500
			factor = 1
			gai_build_district = yes
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 0
				}
			}
		}
		modifier = {
			weight = 900
			factor = 1
			gai_good_energy = yes
			planet = { count_pops = { limit = { is_sapient = yes } count > 3 } }
		}
		modifier = {
			weight = 500
			planet = {
				free_jobs < 4
				any_owned_pop = {
					OR = {
						is_unemployed = yes
						has_job = servant
					}
					NOR = {
						is_pop_category = specialist
						is_pop_category = ruler
					}
				}
				owner = {
					has_monthly_income = {
						resource = energy
						value < -15
					}
				}
			}
		}
	}

	ai_resource_production = {
		energy = 1
		trigger = {
			always = yes
		}
	}
}

##################################
### Gigastructural Engineering ###
##################################

district_penrose_ringworld_generator = {
	base_buildtime = 240
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		is_planet_class = pc_giga_ringworld_habitable
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	potential = {
		is_planet_class = pc_giga_ringworld_habitable
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}

	conversion_ratio = 1
	
	resources = {
		category = planet_districts
		cost = {
			minerals = 800
		}	
		upkeep = {
			minerals = 2
		}
		produces = {
			physics_research = 5
			energy = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_keepers_harmony }
		}
		modifier = { planet_amenities_add = -1}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_housing_agrarian_idyll 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_technician_drone_add = 5
		}
	}	
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
			}
		}
		modifier = {
			job_technician_add = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
			   	OR = {
			       		has_valid_civic = civic_labour_unions
				   	has_valid_civic = civic_socialistic
				}
			}
		}
		modifier = { job_technician_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
			}
		}
		text = job_technician_effect_desc
	}
	
	ai_weight = {
		weight = 1
		modifier = 
		{
			factor = 3
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 8
				}
			}
		}

		modifier = {
			factor = 2
			free_housing < 0
		}
		
		modifier = {
			factor = 4
            owner = {
                OR = {
                    is_machine_empire = yes
                    is_mechanical_empire = yes
                }
                has_monthly_income = {
                    resource = energy
                    value < 50
                }
            }
		}

		modifier = {
			factor = 3
			any_owned_pop = { 
				OR = { 
					is_unemployed = yes 
					has_job = servant 
				}
			}
		}

		# No one to work it anyway
		modifier = {
			factor = 0
			free_housing > 0
			NOT = {
				any_owned_pop = { 
					OR = { 
						is_unemployed = yes 
						has_job = servant 
					}
				}
			}
		}

		### Glavius's Ultimate AI
		modifier = {
			weight = 0
			has_global_flag = gai_enabled_flag
		}
		modifier = {

			weight = 500
			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			owner = {
				has_monthly_income = {

					resource = energy

					value < 150

				}

			}

		}
		modifier = {

			factor = 1.5
			has_global_flag = gai_enabled_flag
			owner = {

				has_monthly_income = {

					resource = energy

					value < 0

				}

			}

		}

		modifier = {

			weight = 250000

			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			free_jobs = 0

			num_free_districts = { type = district_mining value = 0 }

		}
	}

	ai_resource_production = {
		energy = 5
		trigger = {
			always = yes
		}
	}
}

district_interstellar_ringworld_generator = {
	base_buildtime = 240
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		is_planet_class = pc_interstellar_ringworld_habitable
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	potential = {
		is_planet_class = pc_interstellar_ringworld_habitable
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}

	conversion_ratio = 1
	
	resources = {
		category = planet_districts
		cost = {
			minerals = 1000
		}	
		upkeep = {
			energy = 1
		}		
	}

	planet_modifier = {
		planet_housing_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_keepers_harmony }
		}
		modifier = { planet_amenities_add = -1}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_housing_agrarian_idyll 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		modifier = {
			job_technician_drone_add = 5
		}
	}	
		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
			}
		}
		modifier = {
			job_technician_add = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
			   	OR = {
			       		has_valid_civic = civic_labour_unions
				   	has_valid_civic = civic_socialistic
				}
			}
		}
		modifier = { job_technician_add = 2 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
			}
		}
		text = job_technician_effect_desc
	}
	
	ai_weight = {
		weight = 1
		modifier = 
		{
			factor = 3
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 8
				}
			}
		}

		modifier = {
			factor = 2
			free_housing < 0
		}
		
		modifier = {
			factor = 4
            owner = {
                OR = {
                    is_machine_empire = yes
                    is_mechanical_empire = yes
                }
                has_monthly_income = {
                    resource = energy
                    value < 50
                }
            }
		}

		modifier = {
			factor = 3
			any_owned_pop = { 
				OR = { 
					is_unemployed = yes 
					has_job = servant 
				}
			}
		}

		# No one to work it anyway
		modifier = {
			factor = 0
			free_housing > 0
			NOT = {
				any_owned_pop = { 
					OR = { 
						is_unemployed = yes 
						has_job = servant 
					}
				}
			}
		}

		### Glavius's Ultimate AI
		modifier = {
			weight = 0
			has_global_flag = gai_enabled_flag
		}
		modifier = {

			weight = 500
			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			owner = {
				has_monthly_income = {

					resource = energy

					value < 150

				}

			}

		}
		modifier = {

			factor = 1.5
			has_global_flag = gai_enabled_flag
			owner = {

				has_monthly_income = {

					resource = energy

					value < 0

				}

			}

		}

		modifier = {

			weight = 250000

			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			free_jobs = 0

			num_free_districts = { type = district_mining value = 0 }

		}
	}

	ai_resource_production = {
		energy = 5
		trigger = {
			always = yes
		}
	}
}

district_gasgiant_generator = {
	base_buildtime = 600
	is_capped_by_modifier = no
	min_for_deposits_on_planet = 1
	max_for_deposits_on_planet = 15
	
	show_on_uncolonized = {
		is_planet_class = pc_habitable_gas_giant
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	potential = {
		is_planet_class = pc_habitable_gas_giant
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
		
	resources = {
		category = planet_districts
		cost = {
			minerals = 1500
			alloys = 100
		}
		upkeep = {
			minerals = 5
		}	
		upkeep = {
		  	trigger = { 
				owner = { or = { has_valid_civic = civic_socialistic	}	}
			}
			minerals = 1
		}
		produces = {
			energy = 5
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_keepers_harmony }
		}
		modifier = { planet_amenities_add = -1}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_housing_agrarian_idyll 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = {
			job_technician_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
			   	OR = {
			       		has_valid_civic = civic_labour_unions
				   	has_valid_civic = civic_socialistic
				}
			}
		}
		modifier = { job_technician_add = 1 }
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}	
		job_technician_drone_add = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_technician_effect_desc
	}

	ai_weight = {
		weight = 1
		modifier = 
		{
			factor = 3
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 8
				}
			}
		}

		modifier = {
			factor = 2
			free_housing < 0
		}
		
		modifier = {
			factor = 4
            owner = {
                OR = {
                    is_machine_empire = yes
                    is_mechanical_empire = yes
                }
                has_monthly_income = {
                    resource = energy
                    value < 50
                }
            }
		}

		modifier = {
			factor = 3
			any_owned_pop = { 
				OR = { 
					is_unemployed = yes 
					has_job = servant 
				}
			}
		}

		# No one to work it anyway
		modifier = {
			factor = 0
			free_housing > 0
			NOT = {
				any_owned_pop = { 
					OR = { 
						is_unemployed = yes 
						has_job = servant 
					}
				}
			}
		}

		### Glavius's Ultimate AI
		modifier = {
			weight = 0
			has_global_flag = gai_enabled_flag
		}
		modifier = {

			weight = 500
			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			owner = {
				has_monthly_income = {

					resource = energy

					value < 150

				}

			}

		}
		modifier = {

			factor = 1.5
			has_global_flag = gai_enabled_flag
			owner = {

				has_monthly_income = {

					resource = energy

					value < 0

				}

			}

		}

		modifier = {

			weight = 250000

			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			free_jobs = 0

			num_free_districts = { type = district_mining value = 0 }

		}
	}
}

district_elysium_energy = {
	base_buildtime = 300
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		is_planet_class = pc_gigaorbital_ring
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	potential = {
		is_planet_class = pc_gigaorbital_ring
		NOT = { has_modifier = dd_home_planet }
		NOT = { has_modifier = dd_home_evolved_regular }
		NOT = { has_modifier = dd_home_evolved_hive }
		NOT = { has_modifier = dd_home_evolved_machine }
		NOT = { has_modifier = dd_home_ascended_regular }
		NOT = { has_modifier = dd_home_ascended_hive }
		NOT = { has_modifier = dd_home_ascended_machine }
		NOT = { has_modifier = pm_Utopian_Paradise }
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = 750
		}
		upkeep = {
			minerals = 5
		}		
		upkeep = {
		  	trigger = { 
				owner = { or = { has_valid_civic = civic_socialistic	}	}
			}
			minerals = 1
		}	
	}
	
	planet_modifier = {
		planet_housing_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_valid_civic = civic_keepers_harmony }
		}
		modifier = { planet_amenities_add = -1}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_housing_agrarian_idyll 
				has_valid_civic = civic_agrarian_idyll
			}
		}
		modifier = { planet_housing_add = 1 }
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		modifier = {
			job_technician_add = 2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_gestalt = yes }
		}	
		job_technician_drone_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = yes }
		}
		modifier = { job_technician_drone_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_1
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_2
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_3
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_4
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_do_energy_5
				  is_gestalt = no }
		}
		modifier = { job_technician_add = 1 }
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_technician_drone_effect_desc
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
			   	OR = {
			       		has_valid_civic = civic_labour_unions
				   	has_valid_civic = civic_socialistic
				}
			}
		}
		modifier = { job_technician_add = 1 }
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_gestalt = no
				is_fallen_empire_spiritualist = no
			}
		}
		text = job_technician_effect_desc
	}
	
	ai_weight = {
		weight = 1
		modifier = 
		{
			factor = 3
			owner = { 
				has_monthly_income = {
					resource = energy
					value < 8
				}
			}
		}

		modifier = {
			factor = 2
			free_housing < 0
		}
		
		modifier = {
			factor = 4
            owner = {
                OR = {
                    is_machine_empire = yes
                    is_mechanical_empire = yes
                }
                has_monthly_income = {
                    resource = energy
                    value < 50
                }
            }
		}

		modifier = {
			factor = 3
			any_owned_pop = { 
				OR = { 
					is_unemployed = yes 
					has_job = servant 
				}
			}
		}

		# No one to work it anyway
		modifier = {
			factor = 0
			free_housing > 0
			NOT = {
				any_owned_pop = { 
					OR = { 
						is_unemployed = yes 
						has_job = servant 
					}
				}
			}
		}

		### Glavius's Ultimate AI
		modifier = {
			weight = 0
			has_global_flag = gai_enabled_flag
		}
		modifier = {

			weight = 500
			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			owner = {
				has_monthly_income = {

					resource = energy

					value < 150

				}

			}

		}
		modifier = {

			factor = 1.5
			has_global_flag = gai_enabled_flag
			owner = {

				has_monthly_income = {

					resource = energy

					value < 0

				}

			}

		}

		modifier = {

			weight = 250000

			has_global_flag = gai_enabled_flag
			NOT = { has_planet_flag = gai_arc }

			free_jobs = 0

			num_free_districts = { type = district_mining value = 0 }

		}
	}

	#ai_resource_production = {
	#	energy = 1
	#	trigger = {
	#		always = yes
	#	}
	#}
}